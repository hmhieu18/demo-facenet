<!DOCTYPE html>
<html>
  <head>
    <title>Upload</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  </head>
  <body>
    <form
      id="upload-form"
      action="{{ url_for('upload') }}"
      method="POST"
      enctype="multipart/form-data"
    >
      <strong>Choose an image and a video</strong><br />

      <div>
        <label for="file-picker-image" class="btn">Select Image</label>
        <input
          id="file-picker-image"
          type="file"
          name="image"
          accept="image/*"
        />
      </div>
      <div id="msg1"></div>

      <div>
        <label for="file-picker-video" class="btn">Select Video</label>
        <input
          id="file-picker-video"
          type="file"
          name="video"
          accept="video/*"
        />
      </div>

      
      <div id="msg2"></div>
      
      <div>
        <label for="threshold" class="btn">Distance threshold</label>
        <input
          id="threshold"
          type="number"
          step="0.01"
          name="threshold"
        />
      </div>

      <input type="submit" value="Upload!" id="upload-button" />
    </form>
  </body>
  <script>
    $("#file-picker-image").change(function () {
      var input = document.getElementById("file-picker-image");

      for (var i = 0; i < input.files.length; i++) {
        var ext = input.files[i].name
          .substring(input.files[i].name.lastIndexOf(".") + 1)
          .toLowerCase();

        if (ext == "jpg" || ext == "png") {
          $("#msg1").text("Files are supported");
        } else {
          $("#msg1").text("Files are NOT supported");
          document.getElementById("file-picker-image").value = "";
        }
      }
    });

    $("#file-picker-video").change(function () {
      var input = document.getElementById("file-picker-video");

      for (var i = 0; i < input.files.length; i++) {
        var ext = input.files[i].name
          .substring(input.files[i].name.lastIndexOf(".") + 1)
          .toLowerCase();

        if (ext == "mp4") {
          $("#msg2").text("Files are supported");
        } else {
          $("#msg2").text("Files are NOT supported");
          document.getElementById("file-picker-video").value = "";
        }
      }
    });
  </script>
</html>
